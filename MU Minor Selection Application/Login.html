<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title style= font-family: sans-serif;>Welcome to MU Minor Match</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Codeconvey" />
        <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,900&display=swap" rel="stylesheet"><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css'>
        <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css'>
   <!--Only for demo purpose - no need to add.-->
   <!--<link rel="stylesheet" href="style.css" />-->
        <link rel= "stylesheet" href="_login.css">
        <link rel= "stylesheet" href="Login.js">
    </head>
    <style>
        
    
     Stashed changes

    
    
    
    
    
    </style>
    <body>
      <section>
        <h1>University of Missouri Minor Match</h1>
        <div id="login_div" class="wrapper">
            <form action="/Home.html" class="form-signin">
              <h2 class="form-signin-heading">LOGIN</h2>
              <input type="text" class="form-control" name="username" placeholder="Email Address" id= "email" required="" autofocus="" /> <br>
              <input type="password" class="form-control" name="password" placeholder="Password" id= "password" required=""/> <br>
              <label class="checkbox">
                <input type="checkbox" value="remember-me" id="rememberMe" name="rememberMe"> Remember me
              </label>
                <a href="Home.html">
                    <button type=submit class="btn btn-lg btn-primary btn-block" id='login' name='login'>Login</button><br></a>
              <p>Don't have an account?</p>
              <a href="Signup.html"><button class="btn2" type="button">Sign Up</button></a>
            </form>
        </div>
            </section>
<!--        <footer>-->
        <div class="footer">
          <p id="logoText"><img src="University_of_Missouri_logo.png" alt="Missouri Logo">University of Missouri<br></p>
          <h1 id="foot">Contact Us</h1>
          <h4>Minors at Mizzou</h4>
            <h5><a class="link" href="https://majors.missouri.edu">Find your Major</a></h5>
              <p>University Registrar, 125 Jesse Hall, Columbia, MO 65211 <br> Phone: 573-882-7881 | E-mail: <a class="link" href="mailto:umcunivregistrarwr@missouri.edu">umcunivregistrarwr@missouri.edu</a><br>Published 2022.</p>
        </div>
    </body>
    
    
    
    
    
    
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.8/firebase-app.js";
      import { getDatabase, ref, update } from "https://www.gstatic.com/firebasejs/9.6.8/firebase-database.js";
      import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.6.8/firebase-auth.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyBJj8-roAqatS4RAvhhivO3-g6C9Kom_-k",
        authDomain: "muminormatch.firebaseapp.com",
        databaseURL: "https://muminormatch-default-rtdb.firebaseio.com",
        projectId: "muminormatch",
        storageBucket: "muminormatch.appspot.com",
        messagingSenderId: "24369000206",
        appId: "1:24369000206:web:e213ef859e9f8c8444315f"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const database = getDatabase(app);
      const auth = getAuth();
        
      login.addEventListener('click', (e)=>{
        var email = document.getElementById('email').value;
        var password = document.getElementById('password').value;

            signInWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {

                const user = userCredential.user;

                const dt = new Date();

                update(ref(database, 'users/' + user.uid),{
                    last_login: dt,
                })

                alert('User logged in!'); 
            })
            .catch((error) =>{
                const errorCode = error.code;
                const errorMessage = error.message;

                alert(errorMessage);

            });
          });
        </script>
<!--    <script type='module' src= "Login.js"></script>-->
</html>
